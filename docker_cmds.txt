https://docs.docker.com/engine/installation/linux/fedora/
# minimum kernel 3.10
uname -r
# na bieżąco update systemu
sudo dnf update

sudo tee /etc/yum.repos.d/docker.repo <<-'EOF'
[dockerrepo]
name=Docker Repository
baseurl=https://yum.dockerproject.org/repo/main/fedora/$releasever/
enabled=1
gpgcheck=1
gpgkey=https://yum.dockerproject.org/gpg
EOF

sudo dnf install docker-engine

sudo systemctl start docker
# start daemona z sytemem
sudo systemctl enable docker

# dodanie użytkownika do grupy docker, nie potrzebujemy wtedy sudo
sudo usermod -aG docker your_username

sudo docker run hello-world

# -d w tle
# -P eksponuje na porcie
docker run -d -P seqvence/static-site

# pokazuje działające kontenery
docker ps
# pokazuje wszystkie kontenery
docker ps -a
# formatowanie z szablonem Go; dzięki table mamy nagłówek
docker ps -a --format "table {{.ID}}\t{{.Ports}}\t{{.Names}}"

# dokładna pomoc do komendy
docker COMMAND --help

docker version
docker info

docker start id_kontenera

# ubuntu w trybie interaktywnym z konsolą
docker run -it ubuntu bash
# jesteśmy w konsoli kontenera, możemy wyjść exit, to również wyłącza kontener
exit

docker run --name msqltest -e MYSQL_ROOT_PASSWORD=secret-pswd -d mysql/mysql-server
docker run --name wptest --link msqltest:mysql -p 8080:80 -d wordpress

# usunięcie kontenera, ale nie obrazu
docker rm id_kontenera

# można ręcznie usunąć kontener, przy wyłączonej usłudze docker
sudo rm -rf /var/lib/docker/containers/*

# standardowo docker nasłuchuje na lokalnym sokecie unixowym
# upewniamy się, że docker nie nasłuchuje na tcp
(sudo) netstat -tlp
# zamykamy usługę dockera
sudo systemctl stop docker
# ustawiamy nasłuchiwanie na TCP/IP (danej maszyny)
# 2375 to standardowy non-SSL port dla dockera
# -d daemon mode
# & powrót do linii komend
docker -H 192.168.56.50:2375 -d &
# na innym systemie host dockera ustawiamy zdalny, a nie lokalny przez socket
export DOCKER_HOST="tcp://192.168.56.50:2375"
# teraz docker łączy się z demonem pierwszego kompa
# potencjalnie umożliwiamy każdemu połączenie się z demonem
# możemy wrócić do lokalnego demona
export DOCKER_HOST=
# można również skonfigurować demona do nasłuchiwania na porcie sieciowym i lokalnym sokecie
docker -H 192.168.56.50:2375 -H unix:///var/run/docker.sock -d &
